{% extends 'base.html.twig' %}

{% block title %}Hello OwnerReservationsController!{% endblock %}

{% block body %}
<main class="owner-dashboard">
    <div class="container">
        <header class="ownerhead">
            <div class="container">

                <div class="logo">
                    <div class="container">

                        <a href="{{ path('public_home') }}">
                            <img src="{{ asset('images/logo_boxtogo.svg') }}" alt="BoxToGo logo">
                        </a>
                
                        {% if app.user.admin is defined %}
                            <div class="masthead-logo__sub-section">
                                <a href="" class="active">Public Site</a>
                                <a href="">Admin Interface</a>
                            </div>
                        {% endif %}

                    </div>
                </div>

                <nav>
                    <div class="container">
                        <a href="">Réservations</a>
                        <a href="">Annonces</a>
                        <a href="">Publier une annonce</a>
                    </div>
                </nav>

                <div class="masthead__section--action">
                    <div class="masthead-action">
                        <div class="masthead-action__button-lang" id="btn-dropdown">
                            <img src="{{ asset('images/icones/langue.svg') }}" alt="Language selector">
                            <ul>
                                <li>
                                    <a href="">Français</a>
                                </li>
                                <li>
                                    <a href="">Anglais</a>
                                </li>
                                <li>
                                    <a href="">Néerlandais</a>
                                </li>
                            </ul>
                        </div>
            
                        {% if app.user %}
                        <div class="masthead-action__button-alert">
                            <img src="{{ asset('images/icones/alert.svg') }}" alt="icone de notification">
                        </div>
                        {% endif %}
            
                        <div class="masthead-action__button-menu" id="btn-dropdown">
                            {% if app.user %}
                                <img src="{{ asset('images/icones/icone-menu.svg') }}" alt="User menu" id="btn-connect">
                                <ul class="menu-dropdown">
        
                                    <li class="menu-dropdown--personal">
                                        <a href="">Messages</a>
                                        <a href="">Notifications</a>
                                        {% if 'ROLE_OWNER' in app.user.roles %}
                                            <a href="{{ path('priver_owner_reservations', {'id': app.user.id}) }}">Tableau de board</a>
                                        {% else %}
                                            <a href="{{ path('public_user_reservations', {'id': app.user.id}) }}">Réservations</a>
                                        {% endif %}
                                    </li>
        
                                    <li class="menu-dropdown--settings">
                                        <a href="">Favoris</a>
                                        <a href="{{ path('public_account', {'id': app.user.id}) }}">Paramètres</a>
                                        <a href="">Publier mon annonce</a>
        
                                        <form>
                                            <button class="active">Thème claire</button>
                                            <button>Thème sombre</button>
                                        </form>
                                    </li>
        
                                    <li class="menu-dropdown--logout">
                                        <a href="{{ path('app_logout') }}">Se déconnecter</a>
                                    </li>
        
                                </ul>
                            {% else %}
                                <a href="{{ path("app_login") }}" class="header__button__user-login">{{ 'Log in'|trans }}</a>
                            {% endif %}
                        </div>
                    </div>
                </div>

            </div>
        </header>

        <section class="dashboard">
            <div class="container">

                <h1 class="titre">Annonces</h1>

                {% for space in spaces %}
                {% set language = space.user.language|lower|capitalize %}
                {% if language == 'En' %}
                    {% set title = space.content.titleEn %}
                {% endif %}
                {% if language == 'Fr' %}
                    {% set title = space.content.titleFr %}
                {% endif %}
                {% if language == 'Nl' %}
                    {% set title = space.content.titleNl %}
                {% endif %}
                <article>
                    <div class="container">

                        <div class="box1">
                            <a href="{{ path('public_property_details', {'id': space.id}) }}">
                                <img src="{{ asset('assets/uploads/' ~ space.file ~ '/' ~ space.image.first.imagePath) }}" alt="Image {{ space.spaceCateg.name }}">
                            </a>
                            <div class="text">
                                <p>{{ title }}</p>
                                <p>{{ space }} {{ space.adresse.first }} </p>
                                <p>{{ space.price }} €</p>
                                <p>{{ space.surface }} m <sup>2</sup> </p>
                            </div>
                            <div>
                                <p>{{ space.status }}</p>
                            </div>
                        </div>
                        <div class="box2">
                            <button>Supprimer</button>
                            <button>Désactiver</button>
                            <button>Modifier</button>
                        </div>

                    </div>
                </article>
                <p>Numéro de réservation : ****</p>
                {% endfor %}

            </div>
        </section>
    </div>
</main>
{% endblock %}
