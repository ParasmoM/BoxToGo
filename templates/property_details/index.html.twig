{% extends 'base.html.twig' %}

{% block title %}Hello PropertyDetailsController!{% endblock %}

{% block javascripts %}
<script src="{{ asset('js/masthead.js') }}" defer></script>
<script src="{{ asset('js/property_detail.js') }}" defer></script>
{% endblock %}

{% set image1 = space.image.first.imagePath ? space.image.first.imagePath : false %}
{% set image2 = space.image.next.imagePath ? space.image.next.imagePath : false %}
{% set image3 = space.image.next.imagePath ? space.image.next.imagePath : false %}
{% set image4 = space.image.next.imagePath ? space.image.next.imagePath : false %}
{% set image5 = space.image.next.imagePath ? space.image.next.imagePath : false %}
{% block body %}
<section class="space-detail">
    <div class="space-detail__container">

        <header class="space-detail__header">
            {% include "layout/header-main.html.twig" %}
        </header>

        <main class="space-detail__content">
            <div class="space-detail__content-container">

                <section class="space-detail__gallery">

                    <div class="space-detail__gallery-header">
                        <h1 class="space-detail__gallery-title">{{ space.spaceCateg|capitalize }} à louer sur {{ space.adresse.first.city|capitalize }} - {{ space.surface }} m<sup>2</sup></h1>
                        <p class="space-detail__gallery-evaluation">
                            <span class="space-detail__gallery-stars">******* ?? évaluation</span>
                            <span class="space-detail__gallery-ref">REF **********</span>
                        </p>
                    </div>

                    <div class="space-detail__gallery-images">

                        <div class="space-detail__gallery-image-item">
                            {% if image1 %}
                            <img src="{{ asset('assets/uploads/' ~ space.file ~ '/' ~ image1) }}" alt="">
                            {% endif %}
                        </div>
                        {% if image2 %}
                            <div class="space-detail__gallery-image-item">
                                <div>
                                    <p><img src="{{ asset('assets/uploads/' ~ space.file ~ '/' ~ image2) }}" alt=""></p>
                                    {% if image4 %}
                                    <p><img src="{{ asset('assets/uploads/' ~ space.file ~ '/' ~ image4) }}" alt=""></p>
                                    {% endif %}
                                </div>
                                {% if image3 %}
                                <div>
                                    <p><img src="{{ asset('assets/uploads/' ~ space.file ~ '/' ~ image3) }}" alt=""></p>
                                    {% if image5 %}
                                    <p><img src="{{ asset('assets/uploads/' ~ space.file ~ '/' ~ image5) }}" alt=""></p>
                                    {% endif %}
                                </div>
                                {% endif %}
                            </div>
                        {% endif %}
                        <button class="space-detail__gallery-images-btn">
                            {% if nbr > 4 %}
                                +{{ nbr }} photos
                            {% endif %}
                        </button>
                    </div>

                    <div class="space-detail__gallery-footer">
                        <div class="space-detail__gallery__map-content">

                            <div class="space-detail__gallery__actions">
                                <a href="{{ path('app_reviews', {'id': space.id}) }}">Laisser un commentaires</a>

                                <div>
                                    <button><img src="{{ asset('images/icones/envelope.svg') }}" alt=""></button>
                                    <button><img src="{{ asset('images/icones/share.svg') }}" alt=""></button>
                                    <button><img src="{{ asset('images/icones/favorite.svg') }}" alt=""></button>
                                </div>
                            </div>

                            <div class="space-detail__gallery__map">
                                <p>{{ space.spaceCateg|capitalize }} <span>- {{ space.host.status|capitalize }} -</span> {{ space.adresse.first|capitalize }}</p>
                                <div>
                                    <iframe src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d2531.626127283953!2d5.552801016138968!3d50.615484399237076!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x47c0f9ecae988717%3A0xd109734e9db8a544!2sRue%20du%20Perron%203%2C%204000%20Li%C3%A8ge!5e0!3m2!1sfr!2sbe!4v1693183790320!5m2!1sfr!2sbe" width="100%" height="350" style="border:0;" allowfullscreen="" loading="lazy" referrerpolicy="no-referrer-when-downgrade"></iframe>
                                </div>
                            </div>

                        </div>

                        <div class="space-detail__gallery__billing">
                            <p>Faites votre réservation</p>
                            <p><span>55 €</span> Par mois</p>
                            <form action="#">
                                <div>
                                    <p>
                                        <label for="">Dépot</label>
                                        <input type="text" placeholder="Ajouter une date">
                                    </p>
                                    <p>
                                        <label for="">Retrait</label>
                                        <input type="text" placeholder="Ajouter une date">
                                    </p>
                                </div>

                                <button>Réserver le lieu</button>
                            </form>
                        </div>
                    </div>

                </section>

                <section class="space-detail__info">

                    <h1 class="space-detail__info-title">Installations du bien </h1>
                    <div class="space-detail__info-equipments">
                        {% for equipment in space.equipment.first.spaceEquipments %}
                            <p>
                                <img src="{{ asset('images/icones/svg/' ~ equipment.id ~ '.svg') }}" alt="">{{ equipment }}
                            </p>
                        {% endfor %}
                    </div>

                    <h1 class="space-detail__info-title">Description du bien</h1>
                    <p class="space-detail__info-description">
                        {{ space.content.getDescriptionBasedOnLanguage(space.host.language) }} 
                    </p>

                </section>

                <section class="space-detail__reviews-stats">
                    <h1 class="space-detail__info-title">Commentaires des clients</h1>
                    <div class="space-detail__reviews-stats">
                        
                    </div>

                    <div class="space-detail__reviews-comments">
                        
                    </div>
                </section>

                <section class="space-detail__host">
                    <h1 class="title">Faites connaissance avec votre hôte</h1>

                    <div class="space-detail__host-content">
                        <a href="" class="space-detail__host-link">
                            {% include "components/_avatar.html.twig" %}
                        </a>

                        <article class="space-detail__host-profile">
                            <h3 class="space-detail__host-profile__title">
                                <a href="{{ path('public_owner_profile', {'id': space.host.id}) }}">{{ space.host.familyName|capitalize }}  {{ space.host.givenName|capitalize }}</a>
                            </h3>
                            <div class="space-detail__host-profile__desciption">
                                {{ space.host.content.getDescriptionBasedOnLanguage(space.host.language)|capitalize }}
                            </div>
                        </article>

                        <article class="space-detail__host-details">
                            <div class="space-detail__host-details__labels">
                                <p>Notes globale :</p>
                                <p>Nombres d’évaluations :</p>
                                <p>Années d’expérience :</p>
                                <p>Statut :</p>
                                <p>Email :</p>
                                <p>Téléphone :</p>
                                <p>Langues :</p>
                                <p>Taux de réponse :</p>
                                <p>Délai de réponse :</p>
                            </div>
                            <div class="space-detail__host-details__values">
                                <p>****</p>
                                <p>****</p>
                                <p>****</p>
                                <p>{{ space.host.status }}</p>
                                <p>{{ space.host.email }}</p>
                                <p>{{ space.host.phoneNumber }}</p>
                                <p>{{ space.host.language }}</p>
                                <p>****</p>
                                <p>****</p>
                            </div>
                        </article>
                    </div>
                </section>

            </div>
        </main>

    </div>
</section>
{# <main class="space-detail">
    <div class="container">

        <section>

            <h2>Faites connaissance avec votre hôte</h2>

            <div class="content">

                <a href="{{ path('public_owner_profile', {'id': space.host.id}) }}" class="avatar">
                    
                </a>

                <article>
                    <h3><a href="{{ path('public_owner_profile', {'id': space.host.id}) }}">{{ space.user }}</a></h3>
                    <div>
                        
                    </div>
                </article>

                <article>
                    <div>
                        <p>Notes globale :</p>
                        <p>Nombres d’évaluations :</p>
                        <p>Années d’expérience :</p>
                        <p>Statut :</p>
                        <p>Email :</p>
                        <p>Téléphone :</p>
                        <p>Langues :</p>
                        <p>Taux de réponse :</p>
                        <p>Délai de réponse :</p>
                    </div>
                    <div>
                        <p>****</p>
                        <p>****</p>
                        <p>****</p>
                        <p>{{ space.host.status }}</p>
                        <p>{{ space.host.email }}</p>
                        <p>{{ space.host.phoneNumber }}</p>
                        <p>{{ space.host.language }}</p>
                        <p>****</p>
                        <p>****</p>
                    </div>
                </article>

            </div>

        </section>

        <section>
            
        </section>
    </div>
</main> #}
{% endblock %}

