{% extends 'base.html.twig' %}

{% block title %}Hello FavoritesController!{% endblock %}

{% block javascripts %}
<script src="{{ asset('js/masthead.js') }}" defer></script>
<script src="{{ asset('js/favori.js') }}" defer></script>
{% endblock %}

{% block body %}
<main>
    <div class="container">

        <header class="sechead">
            <div class="container">

                <div class="logo">
                    <div class="container">

                        <a href="{{ path('public_home') }}">
                            <img src="{{ asset('images/logo_boxtogo.svg') }}" alt="BoxToGo logo">
                        </a>
                
                        {% if app.user.admin is defined %}
                            <div class="masthead-logo__sub-section">
                                <a href="" class="active">Public Site</a>
                                <a href="">Admin Interface</a>
                            </div>
                        {% endif %}

                    </div>
                </div>

                <nav>
                    <div class="container">
                        <a href="">Réservations</a>
                        <a href="">Annonces</a>
                        <a href="">Publier une annonce</a>
                    </div>
                </nav>

                <div class="masthead__section--action">
                    <div class="masthead-action">
                        <div class="masthead-action__button-lang" id="btn-dropdown">
                            <img src="{{ asset('images/icones/langue.svg') }}" alt="Language selector">
                            <ul>
                                <li>
                                    <a href="">Français</a>
                                </li>
                                <li>
                                    <a href="">Anglais</a>
                                </li>
                                <li>
                                    <a href="">Néerlandais</a>
                                </li>
                            </ul>
                        </div>
            
                        {% if app.user %}
                        <div class="masthead-action__button-alert">
                            <img src="{{ asset('images/icones/alert.svg') }}" alt="icone de notification">
                        </div>
                        {% endif %}
            
                        <div class="masthead-action__button-menu" id="btn-dropdown">
                            {% if app.user %}
                                <img src="{{ asset('images/icones/icone-menu.svg') }}" alt="User menu" id="btn-connect">
                                <ul class="menu-dropdown">
        
                                    <li class="menu-dropdown--personal">
                                        <a href="">Messages</a>
                                        <a href="">Notifications</a>
                                        {% if 'ROLE_OWNER' in app.user.roles %}
                                            <a href="{{ path('priver_owner_reservations', {'id': app.user.id}) }}">Tableau de board</a>
                                        {% else %}
                                            <a href="{{ path('public_user_reservations', {'id': app.user.id}) }}">Réservations</a>
                                        {% endif %}
                                    </li>
        
                                    <li class="menu-dropdown--settings">
                                        <a href="">Favoris</a>
                                        <a href="{{ path('public_account', {'id': app.user.id}) }}">Paramètres</a>
                                        <a href="">Publier mon annonce</a>
        
                                        <form>
                                            <button class="active">Thème claire</button>
                                            <button>Thème sombre</button>
                                        </form>
                                    </li>
        
                                    <li class="menu-dropdown--logout">
                                        <a href="{{ path('app_logout') }}">Se déconnecter</a>
                                    </li>
        
                                </ul>
                            {% else %}
                                <a href="{{ path("app_login") }}" class="header__button__user-login">{{ 'Log in'|trans }}</a>
                            {% endif %}
                        </div>
                    </div>
                </div>

            </div>
        </header>

        <div>
            <div class="container">
                {% for favori in favorites %}
                {% set space = favori.space %}
                {{ dump(favori) }}
                <div class="card">
                    <div class="image">
                        <div>
                            {# <img src="{{ asset('assets/uploads/' ~ space.file ~ '/' ~ space.image.first.imagePath) }}" alt="Image {{ space.spaceCateg.name }}"> #}
                        </div>
                        <button class="favorite" id="favo" data-user-id="{{ app.user.id }}"  data-space-id="{{ space.id }}">
                            <img src="{{ asset('images/icones/favorite.svg') }}" alt="Image d'un coeur">
                        </button>
                    </div>
                    <article>
                        <section>
                            <p>{{ space.spaceCateg.name }}</p>
                            <p>{{ space.adresse.first.city }}</p>
                            <p>{{ space.host.status }}</p>
                            <p>{{ space.surface }} m<sup>2</sup></p>
                            <p>{{ space.price }} €</p>
                        </section>
                        <section>
                            <P>4,77</P>
                            <div class="icones">
                                
                                {% set camera = 'Surveillance cameras' in space.equipment.first.spaceEquipments ? 'equipped' : null %}
                                <svg class="{{ camera }}" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 48 48">
                                    <g fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="4">
                                        <path d="M19.006 26.276V37H5m37.62-15.785l-3.863-1.035l-4.003 7.21l5.796 1.553l2.07-7.728Z"/>
                                        <path d="m38.757 20.18l-4.003 7.21l-1.742 2.639L5 22.523L8.623 9L40.5 17.541l-1.742 2.639Z"/>
                                    </g>
                                </svg>

                                {% set locker = 'Lockers' in space.equipment.first.spaceEquipments ? 'equipped' : null %}
                                <svg class="{{ locker }}" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">
                                    <path fill="currentColor" d="M12.67 13.67c-.47.46-1.04.83-1.67 1.06V23H8v-2H5v-3h3v-3.28c-1.74-.62-3-2.26-3-4.22C5 8 7 6 9.5 6h.1c-.47.95-.68 2-.57 3.08c-.59.2-1.03.76-1.03 1.42c0 .83.67 1.5 1.5 1.5c.23 0 .45-.06.65-.15c.64.84 1.52 1.47 2.52 1.82m8.06 5.77l-2.76 1.16l-.78-1.84l-2.76 1.17l-1.17-2.77L16.03 16l-1.27-3c-1.85.08-3.65-.95-4.41-2.75c-.96-2.29.12-4.93 2.41-5.9c.24-.1.5-.17.74-.23C12.84 2.87 11.5 2 10 2C7.79 2 6 3.79 6 6v.24c-.3.26-.6.58-.85.91C5.06 6.78 5 6.4 5 6c0-2.76 2.24-5 5-5s5 2.24 5 5c0 1.42-.6 2.67-1.55 3.57c.42.43 1.05.56 1.63.31c.77-.32 1.12-1.2.8-1.96a.939.939 0 0 0-.14-.26C15.9 7.13 16 6.58 16 6c0-.63-.1-1.24-.28-1.81c1.28.36 2.38 1.25 2.93 2.57c.76 1.8.24 3.81-1.15 5.05l3.23 7.63M13 8.6c.37-.41.65-.89.82-1.42c-.54.27-.85.82-.82 1.42Z"/>
                                </svg>

                                {% set alarm = 'Alarm' in space.equipment.first.spaceEquipments ? 'equipped' : null %}
                                <svg class="{{ alarm }}" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">
                                    <path fill="currentColor" d="M8 17h1.85l.575-1.75h3.1L14.1 17H16l-3-8.45h-2L8 17Zm2.9-3.2l1.1-3.3l1.075 3.3H10.9ZM9 3V1h6v2H9Zm3 19q-1.85 0-3.488-.713T5.65 19.35q-1.225-1.225-1.938-2.863T3 13q0-1.85.713-3.488T5.65 6.65q1.225-1.225 2.863-1.938T12 4q1.55 0 2.975.5t2.675 1.45l1.4-1.4l1.4 1.4l-1.4 1.4Q20 8.6 20.5 10.025T21 13q0 1.85-.713 3.488T18.35 19.35q-1.225 1.225-2.863 1.938T12 22Zm0-2q2.9 0 4.95-2.05T19 13q0-2.9-2.05-4.95T12 6Q9.1 6 7.05 8.05T5 13q0 2.9 2.05 4.95T12 20Zm0-7Z"/>
                                </svg>
                            </div>
                            <P>{{ space.status }}</P>
                        </section>
                    </article>
                </div>
                {% endfor %}
            </div>
        </div>

        
    </div>
</main>
{% endblock %}
